# ğŸ› DiabetesDietBot - AI-Based Dietary Assistant for Type 2 Diabetes
![Diabetes Diet Bot](https://github.com/SYEDFAIZAN1987/DiabetesDietBot/blob/main/Architecture.png)
## ğŸ“Œ Overview
**DiabetesDietBot** is an AI-powered chatbot developed by **Syed Faizan** for **Mysore Medical College and Research Institute** as part of a research study on how chatbots can assist **doctors and medical students** in recommending **predefined diet plans** to patients with **Type 2 Diabetes**. 

The bot leverages **Retrieval-Augmented Generation (RAG)**, **FAISS vector search**, and **OpenAI's GPT-3.5-turbo** to provide **personalized diet recommendations** based on patient profiles, such as:
- **Age** (e.g., 40s, 50s)
- **Dietary Preferences** (e.g., Vegetarian, Non-Vegetarian)
- **Caloric Requirements** (e.g., Low, Moderate, High)

It uses a dataset of **structured South Indian meal plans** extracted from a **PDF database** to generate optimized diet recommendations.

---

## ğŸš€ Features
- âœ… **Personalized Diet Plans** â€“ Generates meal plans tailored to user inputs.
- âœ… **RAG-Based Search** â€“ Retrieves relevant meal plans using FAISS for similarity search.
- âœ… **Gradio UI** â€“ Interactive chatbot interface for ease of use.
- âœ… **Secure OpenAI API Integration** â€“ Uses GPT-3.5-turbo for intelligent responses.
- âœ… **Customizable Meal Database** â€“ Works with preloaded **PDF meal plans**.
- âœ… **Optimized for South Indian Diets** â€“ Designed for diabetes-friendly traditional meals.

---

## ğŸ“‚ Project Structure
```
ğŸ“¦ DiabetesDietBot
â”œâ”€â”€ ğŸ“œ app.py # Main Gradio-based chatbot UI
â”œâ”€â”€ ğŸ“œ rag.py # Retrieval-Augmented Generation (RAG) implementation
â”œâ”€â”€ ğŸ“œ rag2.py # Alternative FAISS-based text processing
â”œâ”€â”€ ğŸ“‚ db_mealplans # FAISS vector store for meal plan retrieval
â”œâ”€â”€ ğŸ“œ .env # Environment variables (OpenAI API key)
â””â”€â”€ ğŸ“œ README.md # Project documentation (this file)
```

## âš™ï¸ Setup Instructions

### 1ï¸âƒ£ **Clone the Repository**
```
git clone https://github.com/your-repo/DiabetesDietBot.git
cd DiabetesDietBot
```

### 2ï¸âƒ£ **Install Dependencies**  
Ensure you have **Python 3.8+** installed. Then run:  

```
pip install -r requirements.txt
```

### 3ï¸âƒ£ **Set Up API Keys**  
Create a `.env` file in the project root and add your **OpenAI API key**:  

```
OPENAI_API_KEY=your_openai_api_key
```
## ğŸ› ï¸ Technical Details  

### 1ï¸âƒ£ **Text Extraction from PDFs**  
The meal plans are extracted from `MealPlans.pdf` using `PyPDF2`:  

```
from PyPDF2 import PdfReader
reader = PdfReader("MealPlans.pdf")
text = "\n".join([page.extract_text() for page in reader.pages])
```

### 2ï¸âƒ£ **FAISS-Based Retrieval**  
The extracted text is **embedded** using `OpenAIEmbeddings` and stored in a **FAISS vector database**:  

```
from langchain_openai import OpenAIEmbeddings
from langchain_community.vectorstores import FAISS

embeddings = OpenAIEmbeddings()
vector_store = FAISS.from_texts([meal_plans_text], embedding=embeddings)
```
### 3ï¸âƒ£ **Retrieval-Augmented Generation (RAG)**  
When a user inputs a query, FAISS retrieves **top 3** most relevant meal plans:  

```
docs = vector_store.similarity_search(user_input, k=3)
meal_suggestions = '\n\n'.join([doc.page_content for doc in docs])
```


---

## 4ï¸âƒ£ Gradio Chatbot UI  
A user-friendly **Gradio-based chatbot interface** allows interaction


---

## ğŸ¨ Gradio UI Preview  
The chatbot has a **minimalist UI** with meal plan visualization.

Users can input preferrences
And receive a **tailored meal plan** optimized for **Type 2 Diabetes**.

---
### ğŸ¥— **Diabetes Diet Bot - Evaluation Summary** ğŸ½ï¸

The **Diabetes Diet Bot** was rigorously evaluated using RAGAS (Retrieval-Augmented Generation Assessment Score) metrics to assess the **relevancy**, **correctness**, and **semantic similarity** of the responses generated by the model.


### ** ğŸ“Š **Evaluation Metrics**

| **Metric**              | **Definition**                                                                 | **Score (Avg.)** |
|-------------------------|-------------------------------------------------------------------------------|-----------------|
| âœ… **Answer Relevancy**   | Measures how relevant the bot's responses are to the user's questions.         | **0.9629**      |
| ğŸ¯ **Answer Correctness** | Evaluates the factual accuracy of the provided information.                   | **0.8276**      |
| ğŸ”— **Semantic Similarity** | Assesses how semantically similar the bot's answers are to the ground truth.  | **0.9481**      |



### ğŸ± **Detailed Results per Query**

| **User Query**                                                                                      | **Answer Relevancy** | **Answer Correctness** | **Semantic Similarity** |
|----------------------------------------------------------------------------------------------------|----------------------|------------------------|-------------------------|
| What is the meal plan for a Male in his 20s who is vegetarian with high caloric needs?             | 0.9744               | 0.6247                 | 0.8987                  |
| Suggest a meal plan for a Female in her 40s who is vegetarian with moderate caloric needs.         | 0.9192               | 0.9050                 | 0.9101                  |
| Provide a meal plan for a Male in his 60s with meat-based diet and moderate caloric needs.         | 0.9711               | 0.8697                 | 0.9790                  |
| Suitable meal plan for a Female in her 70s with meat-based meals and low caloric needs.            | 0.9862               | 0.8698                 | 0.9790                  |
| Meal plan for a Male in his 50s who is non-vegetarian with moderate caloric needs.                 | 0.9596               | 0.8690                 | 0.9759                  |



### ğŸš€ **Key Insights**

- **High Relevancy:** The bot consistently provides meal plans tailored to the userâ€™s requirements, maintaining high relevancy across all queries.
- **Strong Semantic Similarity:** Responses closely align with ground truth, reflecting accurate understanding of dietary needs.
- **Areas for Improvement:** Slight dips in correctness for high-caloric vegetarian plans suggest potential enhancements in nutrient-specific recommendations.


## ğŸ“… Future Enhancements  
- ğŸ”¹ **Expand Meal Database** â€“ Include more regional & international diabetes diets.  
- ğŸ”¹ **Nutritional Analysis** â€“ Provide macronutrient breakdown for recommended meals.  
- ğŸ”¹ **Voice Interface** â€“ Integrate with **speech recognition** for accessibility.  
- ğŸ”¹ **Doctor's Portal** â€“ Allow medical professionals to curate and modify diet plans.  

---
### ğŸ“¥ **Sample Bot Response**

**Query:** _"What is the meal plan for a Male in his 20s who is vegetarian with high caloric needs?"_

**Response:**



**Day 1:**
- **Breakfast:** Ragi porridge with mixed nuts and dates, banana
- **Lunch:** Brown rice, sambar, mixed vegetable curry, curd, roasted peanuts
- **Snack:** Chana chaat, coconut water
- **Dinner:** Whole wheat dosa, palak dal, cucumber raita



### ğŸ“Œ **Conclusion**

The **Diabetes Diet Bot** demonstrates exceptional capability in generating personalized meal plans with **high relevance**, **factual correctness**, and **semantic precision**. Its performance makes it a reliable assistant for dietary consultations, particularly for diabetic and health-conscious individuals.



> **Note:** Evaluation results were generated using RAGAS and logged with **Weights & Biases (WandB)** for comprehensive performance tracking.

## ğŸ“œ License  
This project is **open-source** and licensed under the **MIT License**.

---

## ğŸ‘¨â€âš•ï¸ Developed By  
ğŸ›  **Dr. Syed Faizan**  
ğŸ“ **Mysore Medical College & Research Institute**  
ğŸ”— [LinkedIn](https://www.linkedin.com/in/drsyedfaizanmd/)  

For collaborations or research inquiries, feel free to reach out!













